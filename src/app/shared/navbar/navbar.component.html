<div class="contenedor">
  <div class="navbar">
    <img src="/assets/logoFERREMARKET.png" class="logoFERREMARKET" />
    <a class="btn" routerLink="/inicio">
      <i class="fa-solid fa-house"></i>
    </a>
    <a class="btn" routerLink="/productos">Productos</a>
    <a class="btn" routerLink="/ofertas">Ofertas</a>
    <a class="btn" routerLink="/quienessomos">¿Quienes Somos?</a>
    <a class="btn" routerLink="/contacto">Contacto</a>
    <a class="btn" routerLink="/carrito"  routerLinkActive="active">
      <i class="fa-solid fa-cart-shopping"><span class="badge bg-warning text-dark">{{ cantidadProductos }}</span></i>
    </a>

    <form class="d-flex" role="search">
      <input
        class="form-control me-2"
        type="search"
        placeholder="Buscar"
        aria-label="Search"
        (input)="onBuscar($event)"
      />
      <button class="btn btn-outline" type="submit">Buscar</button>
      <!-- <form class="search-form">
                    <input type="text" name="text" placeholder="Buscar" oninput="filtrarPorBuscador(value)">
                    <button>Buscar</button>
                </form>-->
    </form>
    <a class="btn" routerLink="/favoritos">
      <i class="fa-solid fa-star"></i>
    </a>
    <a
      class="btn"
      (click)="alternarModoOscuro()"
    >
      <i
        class="fa-solid"
        [ngClass]="modoOscuroActivado ? 'fa-sun' : 'fa-moon'"
      ></i>
  </a>

    <!-- SI ESTÁ LOGUEADO -->
    <ng-container *ngIf="authService.isLoggedIn(); else sinSesion">
      <a
        class="btn"
        *ngIf="usuario?.rol === 'admin'"
        routerLink="/admin"
        routerLinkActive="active"
      >
        Admin
      </a>

      <!-- USUARIO (ya no se llama getUsuario() en el HTML) -->
      <span class="user-label me-3">
        {{ usuario?.nombre }} ({{ usuario?.rol }})
      </span>

      <button class="btn btn-sm btn-logout" (click)="logout()">
        Cerrar sesión
      </button>
    </ng-container>

    <!-- SI NO ESTÁ LOGUEADO -->
    <ng-template #sinSesion>
      <a routerLink="/iniciosesion" class="btn btn-sm btn-outline-light me-2">
        Iniciar sesión
      </a>
      <a routerLink="/registro" class="btn btn-sm btn-warning"> Registrarse </a>
    </ng-template>
  </div>
</div>
