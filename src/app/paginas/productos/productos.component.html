<div class="filtros">
  <div class="row mb-3">
    <div class="col mb-3">
      <label>Categoria:</label>
      <select
        class="form-select"
        [(ngModel)]="selectedCategory"
        name="categoria"
      >
        <option value="">Todos</option>
        <option *ngFor="let categoria of categories" [value]="categoria">
          {{ categoria }}
        </option>
      </select>
    </div>

    <div class="col mb-3">
      <label>Marca:</label>
      <select class="form-select" [(ngModel)]="selectedBrad" name="marca">
        <option value="">Todos</option>
        <option *ngFor="let marca of marca" [value]="marca">{{ marca }}</option>
      </select>
    </div>
    <div class="col">
      <label>Precio min</label>
      <input
        type="number"
        class="front-control"
        [(ngModel)]="minprecio"
        name="minprecio"
      />
    </div>

    <div class="col">
      <label>Precio max</label>
      <input
        type="number"
        class="front-control"
        [(ngModel)]="maxprecio"
        name="maxprecio"
      />
    </div>

    <div class="col-md-2 d-flex aling-items-end">
      <button class="btn btn-secondary w-100" (click)="resetFilter()">
        <div class="button-top">Limpiar</div>
      </button>
    </div>
  </div>
</div>

<!-- Spinner de carga -->
<div *ngIf="cargando" class="text-center py-5">
  <div class="spinner-border text-primary" role="status"></div>
  <p class="mt-3">Cargando productos...</p>
</div>

<!-- Mensaje de error -->
<div *ngIf="error" class="alert alert-warning text-center">{{ error }}</div>
<div class="card-container">
  <ng-component
    *ngIf="productosParaMostrar && productosParaMostrar.length"
  ></ng-component>
  <ng-container *ngFor="let producto of productosParaMostrar">
    <div class="card">
      <label title="Star" class="star" (click)="agregarAFavoritos(producto)">
        <input id="star-checkbox" class="checkbox" type="checkbox" />
        <div class="svg-container">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="svg-outline"
            viewBox="0 0 24 24"
          >
            <path
              d="M12 2.5L9.45 8.5L3 9.06L7.725 13.39L6.25 19.82L12 16.5L17.75 19.82L16.275 13.39L21 9.06L14.55 8.5L12 2.5ZM12 4.75L14 9.33L18.7 9.75L15 13.07L16.18 17.75L12 15.16L7.82 17.75L9 13.07L5.3 9.75L10 9.33L12 4.75Z"
            ></path>
          </svg>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="svg-filled"
            viewBox="0 0 24 24"
          >
            <path
              d="M12 2.5L9.45 8.5L3 9.06L7.725 13.39L6.25 19.82L12 16.5L17.75 19.82L16.275 13.39L21 9.06L14.55 8.5L12 2.5Z"
            ></path>
          </svg>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            height="100"
            width="100"
            class="svg-celebrate"
          >
            <circle r="2" cy="50" cx="50" class="particle"></circle>
            <circle r="2" cy="50" cx="50" class="particle"></circle>
            <circle r="2" cy="50" cx="50" class="particle"></circle>
            <circle r="2" cy="50" cx="50" class="particle"></circle>
            <circle r="2" cy="50" cx="50" class="particle"></circle>
            <circle r="2" cy="50" cx="50" class="particle"></circle>
            <circle r="2" cy="50" cx="50" class="particle"></circle>
            <circle r="2" cy="50" cx="50" class="particle"></circle>
          </svg>
        </div>
      </label>
      <img
        [src]="'http://localhost/api_proyecto/public/uploads/' + producto.Imagen"
        alt="{{ producto.Nombre }}"
        class="card-img-top"
      />
      <div class="card-body">
        <h5 class="card-title">{{ producto.Nombre }}</h5>
        <h4 class="card-text">{{ producto.Precio | currency }}</h4>
        <button (click)="mostrardescripcion(producto)" class="botonDC">
          Ver descripción
        </button>

        <p *ngIf="productoSeleccionado === producto">
          <strong>Descripción:</strong> {{ producto.Descripcion }}
        </p>

        <button (click)="mostrarcaracteristicas(producto)" class="botonDC">
          Ver caracteristicas
        </button>

        <p *ngIf="productoSeleccionadoC === producto">
          <strong>Caracteristicas:</strong> {{ producto.caracteristicas }}
        </p>

        <button
          type="button"
          class="btn btn-outline-primary"
          (click)="agregarAlCarrito(producto)"
        >
          Agregar al carrito
        </button>
      </div>
    </div>
  </ng-container>
  <div *ngIf="productosParaMostrar.length === 0" class="sinproducfil">
    No se encontraron productos que coincidan con los filtros
  </div>
</div>
